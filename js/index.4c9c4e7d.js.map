{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/modules/struct-schema.js","webpack:///./src/pages/notification/App.vue?e3a0","webpack:///./src/components/ETNotification.vue?0fc7","webpack:///src/components/ETNotification.vue","webpack:///./src/components/ETNotification.vue?078b","webpack:///./src/components/ETNotification.vue","webpack:///src/pages/notification/App.vue","webpack:///./src/pages/notification/App.vue?cb3c","webpack:///./src/pages/notification/App.vue","webpack:///./src/pages/notification/main.js","webpack:///./src/pages/notification/App.vue?e8d8","webpack:///./src/components/ETNotification.vue?1408","webpack:///./src/modules/bytes-to-csv.js","webpack:///./src/modules/encounter-server.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","PRIMITIVES","dataview","prop","byteOffset","getUint8","littleEndian","byteSize","getUint16","getUint32","getInt8","getInt16","getInt32","getFloat32","getFloat64","StructSchema","schema","this","_totalBytes","_props","entry","addProp","type","some","e","Error","def","view","read","DataView","buffer","totalBytes","freeze","bufferOrView","ret","_vm","_h","$createElement","_c","_self","staticRenderFns","staticClass","attrs","deviceInfo","on","$event","controller","disconnect","_e","ref","state","onCancel","_v","onUpload","onExposures","connected","gridData","gridColumns","onConnect","compare","local","exposures","component","library","add","faBatteryEmpty","faBatteryQuarter","faBatteryHalf","faBatteryThreeQuarters","faBatteryFull","faClock","faSquare","farCircle","fasCircle","fasSquare","fasBan","faBluetoothB","Vue","FontAwesomeIcon","FontAwesomeLayers","filter","format","digits","toFixed","dividewithremain","dividend","divisor","h","pad","join","config","productionTip","render","App","$mount","ss","require","recordSize","blockSize","uSound","encounterRecord","data2hex","uint8array","Array","map","x","toString","getDataFromView","arrayView","parsed","Date","minute","timestamp","toISOString","encounter_id","mac","encounterId","isSameValue","start","end","nibble","bytesToData","raw","cursor","byteLength","row","postEncounters","host","port","rows","status","meta","batchSize","added","processed","submission","encounters","_meta","rssi_values","usound_data","JSON","stringify","options","hostname","path","method","headers","http_promise","createHttpRequestPromise","console","log","getEncounters","currentPage","totalPages","cutoff","dayjs","subtract","utc","response","pages","entries","parse","body","Promise","resolve","reject","request","http","chunks_of_data","fragments","response_body","Buffer","concat","statusCode","error","message","write","extend"],"mappings":"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","file":"js/index.4c9c4e7d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/en/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\",\"chunk-common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const PRIMITIVES = {\n    'uint8': {\n      getter: (dataview, prop, byteOffset) => dataview.getUint8(byteOffset, prop.littleEndian),\n      byteSize: 1\n    },\n    'uint16': {\n      getter: (dataview, prop, byteOffset) => dataview.getUint16(byteOffset, prop.littleEndian),\n      byteSize: 2\n    },\n    'uint32': {\n      getter: (dataview, prop, byteOffset) => dataview.getUint32(byteOffset, prop.littleEndian),\n      byteSize: 4\n    },\n    'int8': {\n      getter: (dataview, prop, byteOffset) => dataview.getInt8(byteOffset, prop.littleEndian),\n      byteSize: 1\n    },\n    'int16': {\n      getter: (dataview, prop, byteOffset) => dataview.getInt16(byteOffset, prop.littleEndian),\n      byteSize: 2\n    },\n    'int32': {\n      getter: (dataview, prop, byteOffset) => dataview.getInt32(byteOffset, prop.littleEndian),\n      byteSize: 4\n    },\n    'float32': {\n      getter: (dataview, prop, byteOffset) => dataview.getFloat32(byteOffset, prop.littleEndian),\n      byteSize: 4\n    },\n    'float64': {\n      getter: (dataview, prop, byteOffset) => dataview.getFloat64(byteOffset, prop.littleEndian),\n      byteSize: 8\n    }\n  }\n  \n  // export default class StructSchema {\n  class StructSchema {\n    constructor(schema){\n      this._totalBytes = 0\n      this._props = []\n  \n      for (let entry of schema){\n        this.addProp(entry)\n      }\n    }\n  \n    addProp( entry ){\n      let { key, type, length = 1, littleEndian = false } = entry\n  \n      if (this._props.some(e => e.key === key)){\n        throw new Error(`Property with key name \"${key}\" already defined`)\n      }\n  \n      let byteOffset = this._totalBytes\n      let def\n      if ( type instanceof StructSchema ){\n        def = {\n          getter: (view, prop, byteOffset) => type.read(new DataView(view.buffer, view.byteOffset + byteOffset, prop.byteSize)),\n          byteSize: type._totalBytes\n        }\n      } else {\n        def = PRIMITIVES[type]\n      }\n  \n      if (!def){\n        throw new Error(`Type \"${type}\" not valid.`)\n      }\n  \n      let { getter, byteSize } = def\n  \n      let totalBytes = byteSize * length\n      let prop = Object.freeze({\n        key,\n        type,\n        length,\n        littleEndian,\n        byteSize: byteSize,\n        totalBytes: totalBytes,\n        read(view){\n          let data = []\n          for (let i = 0; i < length; i++){\n            data[i] = getter(view, prop, byteOffset + byteSize * i)\n          }\n          return data\n        }\n      })\n  \n      this._totalBytes += totalBytes\n      this._props.push(prop)\n    }\n  \n    read(bufferOrView){\n      let ret = {}\n  \n      let view = bufferOrView\n      if (!(bufferOrView instanceof DataView)){\n        view = new DataView(bufferOrView)\n      }\n  \n      for (let prop of this._props){\n        let data = prop.read(view)\n        if (prop.length === 1){\n          data = data[0]\n        }\n        ret[prop.key] = data\n      }\n  \n      return ret\n    }\n  }\n  \n  module.exports = {StructSchema}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tabNotification')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"notification-tab\"},[(_vm.connected)?_c('device-info',{attrs:{\"info\":_vm.deviceInfo},on:{\"disconnect\":function($event){return _vm.controller.disconnect()}}}):_vm._e(),(_vm.connected)?_c('div',[_c('progress-status',{ref:\"progress\"}),(_vm.state !== 'default')?_c('button',{on:{\"click\":_vm.onCancel}},[_vm._v(\"Cancel\")]):_vm._e(),(_vm.state === 'default')?_c('button',{on:{\"click\":_vm.onUpload}},[_vm._v(\"Upload\")]):_vm._e(),(_vm.state === 'default')?_c('button',{on:{\"click\":_vm.onExposures}},[_vm._v(\"Check Exposures\")]):_vm._e()],1):_vm._e(),(_vm.connected && _vm.gridData.length > 0)?_c('simple-grid',{attrs:{\"data\":_vm.gridData,\"columns\":_vm.gridColumns,\"caption\":'Exposures'}}):_vm._e(),(!_vm.connected)?_c('button',{attrs:{\"id\":\"connect\"},on:{\"click\":_vm.onConnect}},[_vm._v(\"Connect\")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n<div class=\"notification-tab\">\n<device-info v-on:disconnect=\"controller.disconnect()\" :info=\"deviceInfo\" v-if=\"connected\"></device-info>\n<div v-if=\"connected\">\n    <progress-status ref=\"progress\"></progress-status>\n    <button v-if=\"state !== 'default'\" v-on:click=\"onCancel\">Cancel</button>\n    <button v-if=\"state === 'default'\" v-on:click=\"onUpload\">Upload</button>\n    <button v-if=\"state === 'default'\" v-on:click=\"onExposures\">Check Exposures</button>\n</div>\n<simple-grid :data=\"gridData\" :columns=\"gridColumns\" :caption=\"'Exposures'\" v-if=\"connected && gridData.length > 0\"></simple-grid>\n<button id=\"connect\" v-on:click=\"onConnect\" v-if=\"!connected\">Connect</button>\n</div>\n</template>\n\n<script>\nimport DeviceInfo from './DeviceInfo'\nimport SimpleGrid from './SimpleGrid'\nimport ProgressStatus from './ProgressStatus'\nimport { Controller, InterruptException }  from '../modules/dongle-control'\nimport { DeviceWrapper } from '../modules/device-wrapper'\nimport { bytesToData } from '../modules/bytes-to-csv'\nimport { postEncounters, getEncounters } from '../modules/encounter-server'\n\nimport dayjs from 'dayjs'\nimport duration from 'dayjs/plugin/duration'\n\ndayjs.extend(duration)\n\nfunction compare(local, exposures) {\n    let groups = [];\n    if (exposures.length > 0) {\n        let map = {};\n        let match = {};\n        for (var e of exposures) {\n            map[e.encounterId] = e;\n        }\n        var matches = [];\n        // now look for matches\n        for (var l of local) {\n            // use encounter id\n            if (map[l.encounterId]) {\n                // found a match -- check to see if we have it already\n                if (!match[l.encounterId] || !match[l.encounterId][l.timestamp]) {\n                    if (match[l.encounterId] == undefined) {\n                        match[l.encounterId] = {};\n                    }\n                    match[l.encounterId][l.timestamp] = 1;\n                    matches.push(l);\n                    continue;\n                }\n            }\n        }\n        // now group\n        var lastGroup = undefined;\n        for (var m of matches) {\n            var time = dayjs(m.timestamp);\n            var newGroup = !lastGroup;\n            if (!newGroup) {\n                var cutoff = lastGroup.start.add(5 + lastGroup.duration, 'minutes');\n                newGroup = time.isAfter(cutoff);\n            }\n            if (newGroup) {\n                lastGroup = { start: time, duration: 1, count: 1};\n                groups.push(lastGroup);\n            } else {\n                // add to the current group\n                lastGroup.duration = time.diff(lastGroup.start, 'minute');\n                lastGroup.count += 1;\n            }\n        }\n    }\n    return groups;\n}\n\nexport default {\n    components: { DeviceInfo, SimpleGrid, ProgressStatus},\n    data() {\n        return {\n            controller: Controller(),\n            deviceInfo: undefined,\n            connected: false,\n            gridColumns: [ {title:\"Start Time\", name: 'start', filter: 'formatMoment'},\n                {title: \"Duration (minutes)\", name: 'duration'},\n                {title: \"Count\", name: 'count'}],\n            gridData: [],\n            state: 'default',\n            callbackOptions: { expected: undefined, last: 0, interrupt: false, onProgress: this.onProgress},\n        };\n    },\n    created() {\n        this.controller.on('connected', this.onConnected);\n        this.controller.on('disconnected', this.onDisconnected);\n    },\n    beforeDestroy() {\n        this.controller.off('disconnected', this.onDisconnected)\n        this.controller.off('connected', this.onConnected)\n    },\n    methods: {\n        onProgress: function(received, expected) {\n            if (!this.callbackOptions.expected) {\n                this.callbackOptions.expected = expected\n                this.$refs.progress.taskExtend(expected);\n            }\n            this.$refs.progress.taskNextStep(undefined, received - this.callbackOptions.last);\n            this.callbackOptions.last = received;\n        },\n        onUpload: async function() {\n            var progress = this.$refs.progress;\n            this.state = 'upload';\n\n            // set-up the callback\n            this.callbackOptions.expected = undefined;\n            this.callbackOptions.last = 0;\n            this.callbackOptions.interrupt = false;\n\n            progress.taskBegin(4, \"Retrieving Device Data\");\n            this.controller.getLastAddress()\n                .then(address => {\n                    // check the last address and print it out\n                    console.log('lastAddress: ' + address);\n                    progress.taskNextStep();\n                })\n                .then(() => {\n                    // retrieve the data from the device\n                    return this.controller.fetchData(false, false, this.callbackOptions);\n                })\n                .then(data => {\n                    progress.taskNextStep(\"Processing Data...\");\n                    // now transform into encounter records\n                    return bytesToData(data);\n                })\n                .then(rows => {\n                    rows = rows.filter(v => {\n                        return v.encounterId !== '0000000000000000000000000000000000000000000000000000000000000000';\n                    });\n                    progress.taskNextStep(\"Uploading...\");\n                    // send the data to the server\n                    return postEncounters(\n                        process.env.VUE_APP_DATA_SERVER_HOST,\n                        process.env.VUE_APP_DATA_SERVER_PORT,\n                        rows,\n                        'POSITIVE',\n                        { name: this.controller.getDeviceName() });\n                })\n                .then(result => {\n                    progress.taskEnd(\"Data Upload Complete - Added \" + result);\n                })\n                .catch(error => {\n                    if (error instanceof InterruptException) {\n                        progress.taskCancel(\"Upload Cancelled\");\n                    } else {\n                        progress.taskError(\"Error during Upload: \" + error.message);\n                        console.log(error);\n                    }\n                })\n                .then(() => {\n                    progress.taskReset();\n                    this.state = 'default';\n                });\n        },\n        onCancel: function() {\n            this.callbackOptions.interrupt = true;\n        },\n        onExposures: function() {\n            var progress = this.$refs.progress;\n            this.state = 'exposures';\n            // set-up the callback\n            this.callbackOptions.expected = undefined;\n            this.callbackOptions.last = 0;\n\n            let storage = {};\n            this.gridData = [];\n            progress.taskBegin(4, \"Retrieving Device Data\");\n            // first retrieve the data from the device\n            this.controller.fetchData(true, false, this.callbackOptions)\n                .then(data => {\n                    progress.taskNextStep(\"Device Data Retrieved\");\n                    // retrieve the data from the device\n                    return bytesToData(data);\n                })\n                .then(local => {\n                    progress.taskNextStep(\"Retrieving Server Data\");\n                    storage.local = local;\n                    // then retrieve the data from the server\n                    return getEncounters(process.env.VUE_APP_DATA_SERVER_HOST,\n                        process.env.VUE_APP_DATA_SERVER_PORT);\n                })\n                .then(data => {\n                    progress.taskNextStep(\"Comparing\");\n                    // then compare\n                    this.gridData = compare(storage.local, data);\n                    progress.taskEnd(this.gridData.length > 0 ? \"Complete\" : \"No Encounters Found\");\n                })\n                .catch(error => {\n                    if (error instanceof InterruptException) {\n                        progress.taskCancel(\"Check Cancelled\");\n                    } else {\n                        progress.taskError(\"Error While Looking for Encounters: \" + error.message);\n                        console.log(error);\n                    }\n                })\n                .then(() => {\n                    progress.taskReset();\n                    this.state = 'default';\n                });\n        },\n        onConnect: function() {\n            this.controller.connect()\n            .catch(error => {\n                if (error.name !== 'NotFoundError') {\n                    console.log(error);\n                }\n            })\n        },\n        onConnected: function() {\n            this.controller.getVersion()\n                .then(version => console.log(version))\n                .then(() => new DeviceWrapper(this.controller))\n                .then(info => this.deviceInfo = info)\n                .then(() => {this.connected = true})\n                .catch(error => {\n                    console.log(error);\n                });\n        },\n        onDisconnected: function() {\n            this.connected = false;\n        }\n    }\n}\n\n</script>\n\n<style scoped>\nbutton {\n  margin-right: 0.25em;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ETNotification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ETNotification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ETNotification.vue?vue&type=template&id=e8090b7e&scoped=true&\"\nimport script from \"./ETNotification.vue?vue&type=script&lang=js&\"\nexport * from \"./ETNotification.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ETNotification.vue?vue&type=style&index=0&id=e8090b7e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8090b7e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<tabNotification></tabNotification>\n</template>\n\n<script>\n  import tabNotification from '../../components/ETNotification'\n  export default {\n    name: \"NISTET\",\n    components: {tabNotification},\n    data: function() {\n      return {\n      };\n    },\n    computed: {\n    },\n    created() {\n    }\n  };\n</script>\n\n<style>\nbody {\n  font-family: sans-serif;\n\tfont-size: 1.2rem;\n}\n\nbutton {\n\t\tborder: none;\n\t\tpadding: 0.25rem 1rem;\n\t\tmargin: 0 0.25rem;\n\t\tborder-radius: 10px;\n\t\ttext-decoration: none;\n\t\tbackground: #800080;\n\t\tcolor: #ffffff;\n}\n\n.round-button {\n    display: inline-block;\n    border-radius: 50%;\n    color: #000000;\n    box-shadow: 0 0 4px gray;\n}\n\n.round-button:hover {\n    background: #777555;\n    box-shadow: 0 0 4px gray;\n}\n\n.round-button:active {\n  transform: translateY(2px);\n  box-shadow: 0 0 2px gray;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0d7dbfac&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { faClock, faSquare, faCircle as farCircle } from '@fortawesome/free-regular-svg-icons'\nimport { faBatteryEmpty, faBatteryQuarter, faBatteryHalf, faBatteryThreeQuarters, faBatteryFull } from '@fortawesome/free-solid-svg-icons'\nimport { faCircle as fasCircle, faSquare as fasSquare, faBan as fasBan } from '@fortawesome/free-solid-svg-icons'\n\nimport { faBluetoothB } from '@fortawesome/free-brands-svg-icons'\n\nimport { FontAwesomeLayers, FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\n\nlibrary.add(faBatteryEmpty, faBatteryQuarter, faBatteryHalf, faBatteryThreeQuarters, faBatteryFull, faClock, faSquare, farCircle, fasCircle, fasSquare, fasBan, faBluetoothB)\n\nVue.component('font-awesome-icon', FontAwesomeIcon)\nVue.component('font-awesome-layers', FontAwesomeLayers)\n\nVue.filter('formatMoment', function(value) {\n  if (value) {\n    return value.format('MM/DD/YYYY HH:mm:ss.SSS ZZ')\n  } else {\n    return \"N/A\"\n  }\n})\n\nVue.filter('formatFloat', function(value, digits) {\n  if (value) {\n    return value.toFixed(digits);\n  }\n})\n\nVue.filter('formatUptime', function(value) {\n  if (value) {\n    var dividewithremain = function(dividend, divisor) {\n      var result = [0, 0];\n      result[1] = dividend % divisor;\n      result[0] = (dividend - result[1]) / divisor;\n      return result;\n    }\n    var d = dividewithremain(value, 24 * 60 * 60 * 1000);\n    var h = dividewithremain(d[1], 60 * 60 * 1000);\n    var m = dividewithremain(h[1], 60 * 1000);\n    var s = dividewithremain(m[1], 1000);\n    var pad = function(n) { return n < 10 ? '0' + n : n; };\n    return [pad(d[0]), pad(h[0]), pad(m[0]), pad(s[0])].join(':') + ' (D:H:M:S)';\n  } else {\n    return \"N/A\"\n  }\n})\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ETNotification.vue?vue&type=style&index=0&id=e8090b7e&scoped=true&lang=css&\"","var ss = require('./struct-schema')\n\nconst recordSize = 64;\nconst blockSize = 32;\n\n\nconst uSound = new ss.StructSchema([\n  {\n    key: 'n',\n    type: 'uint8',\n    littleEndian: true\n  },\n  {\n    key: 'left',\n    type: 'uint16',\n    littleEndian: true\n  },\n  {\n    key: 'left_iqr',\n    type: 'uint16',\n    littleEndian: true\n  },\n  {\n    key: 'right',\n    type: 'uint16',\n    littleEndian: true\n  },\n  {\n    key: 'right_iqr',\n    type: 'uint16',\n    littleEndian: true\n  },\n])\n\nconst encounterRecord = new ss.StructSchema([\n  {\n    key: 'minute',\n    type: 'uint32',\n    length: 1,\n    littleEndian: true\n  },\n  {\n    key: 'mac',\n    type: 'uint8',\n    length: 6,\n    littleEndian: true\n  },\n  {\n    key: 'version',\n    type: 'uint8',\n    length: 1,\n    littleEndian: true\n  },\n  {\n    key: 'usound_data',\n    type: uSound,\n    length: 1,\n    littleEndian: true\n  },\n  {\n    key: 'rssi_values',\n    type: 'int8',\n    length: 12\n  },\n  {\n    key: 'encounter_id',\n    type: 'uint8',\n    length: 32,\n    littleEndian: true\n  }\n])\n\nfunction data2hex(uint8array) {\n    // https://stackoverflow.com/questions/40031688/javascript-arraybuffer-to-hex\n    return Array.prototype.map.call(uint8array, x => ('00' + x.toString(16)).slice(-2)).join('');\n}\n\n/*\nfunction convertToCsv(data) {\n  return JSON.stringify(data)\n    .replace(/],\\[/g, '\\n')\n    .replace(/]]/g, '')\n    .replace(/\\[\\[/g, '')\n    // in JSON, double quotes are escaped, but in CSV they need to be\n    // escaped by another double quote\n    .replace(/\\\\\"/g, '\"\"');\n}\n\nfunction isZero(n){ return n === 0 }\n\nfunction getCSVData(data) {\n\n  let rssi = Math.min(...data.rssi_data.map(e => e.mean))\n\n  let [mean37, n37, min37, max37, std237] = [data.rssi_data[0].mean, data.rssi_data[0].n, data.rssi_data[0].min, data.rssi_data[0].max, data.rssi_data[0].var]\n  let [mean38, n38, min38, max38, std238] = [data.rssi_data[1].mean, data.rssi_data[1].n, data.rssi_data[1].min, data.rssi_data[1].max, data.rssi_data[1].var]\n  let [mean39, n39, min39, max39, std239] = [data.rssi_data[2].mean, data.rssi_data[2].n, data.rssi_data[2].min, data.rssi_data[2].max, data.rssi_data[2].var]\n\n  return {\n    date_string: data.timestamp,\n    epoch_minute: data.minute,\n    first: data.first_time,\n    last: data.last_time,\n    mean37, n37, min37, max37, std237,\n    mean38, n38, min38, max38, std238,\n    mean39, n39, min39, max39, std239,\n    flag: data.flag, flag2: data.flag2,\n    id: data.clientKey, rssi\n  }\n}\n*/\n\nfunction getDataFromView(arrayView) {\n  let parsed = encounterRecord.read(arrayView)\n\n  // convert from minute to milliseconds\n  let d = new Date(parsed.minute * 60 * 1000)\n  // create the timestamp -- UTC\n  let timestamp = d.toISOString()\n\n  parsed.encounter_id = data2hex(parsed.encounter_id)\n  parsed.mac = data2hex(parsed.mac)\n  let encounterId = parsed.encounter_id\n  delete parsed.encounter_id\n  return {\n    ...parsed,\n    timestamp,\n    encounterId\n  }\n}\n\n/*\nfunction compareBytes(buf1, offset1, buf2, offset2, length) {\n  let cursor1 = offset1, cursor2 = offset2\n  for (var i = 0; i < length; i++) {\n    if (cursor1 >= buf1.byteLength ||\n      cursor2 >= buf2.byteLength ||\n      buf1[cursor1] !== buf2[cursor2]) {\n      return false;\n    }\n    cursor1++\n    cursor2++\n  }\n  return true;\n}\n*/\n\nfunction isSameValue(buffer, start, end) {\n  var nibble = buffer[start];\n  for (var i = start; i < end; i++) {\n    if (nibble !== buffer[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction bytesToData(raw){\n  let data = []\n  let cursor = 0\n  while ((cursor + recordSize) < raw.byteLength) {\n    // check for blocks of all the same value and filter them out\n    if (isSameValue(raw, cursor, cursor + blockSize)) {\n      cursor += blockSize\n    } else {\n      let row = new DataView(raw.buffer, cursor, recordSize)\n      let entry = getDataFromView(row)\n      data.push(entry)\n      cursor += recordSize\n    }\n  }\n  return data\n}\n\nmodule.exports = {bytesToData}\n// Comment the stuff below ... not needed yet\n// function getPaths(obj){\n//   return _toPairs(obj).reduce((ret, [key, value]) => {\n//     if (_isObject(value)) {\n//       return ret.concat(getPaths(obj).map(k => key + '.' + k))\n//     }\n//\n//     ret.push(key)\n//     return ret\n//   }, [])\n// }\n//\n// export function bytesToCsv(raw) {\n//   // Should check that last_mark is < numBlocks\n//   let data = bytesToData(raw).map(getCSVData)\n//\n//   let paths = getPaths(data[0])\n//   let header = paths.map(_startCase)\n//   let rows = data.map(entry =>\n//     paths.map(p => _get(entry, p))\n//   )\n//\n//   rows.unshift(header)\n//   return convertToCsv(rows)\n// }","import http from 'http'\nimport dayjs from 'dayjs'\nimport utc from 'dayjs/plugin/utc'\n\ndayjs.extend(utc)\n\n// need to send each request and wait to avoid overloading the server\nasync function postEncounters(host, port, rows, status = 'NONE', meta = {}, batchSize = 50) {\n    var added = 0;\n    var processed = 0;\n    while (processed < rows.length) {\n        let submission = { encounters: [] };\n        // process batchSize at a time\n        for (; processed < rows.length && submission.encounters.length < batchSize; processed++) {\n            var entry = rows[processed];\n            submission.encounters.push({\n                status: status,\n                encounterId: entry.encounterId,\n                timestamp: entry.timestamp,\n                _meta: {\n                    mac: entry.mac,\n                    rssi_values: entry.rssi_values,\n                    usound_data: entry.usound_data,\n                    ...meta\n                }\n            });\n        }\n        // now send off to the server\n        let data = JSON.stringify(submission);\n        const options = {\n            hostname: host,\n            port: port,\n            path: '/api/encounters/debug',\n            method: 'POST',\n            headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': data.length\n            }\n        };\n        try {\n            let http_promise = createHttpRequestPromise(options, data);\n            // wait to http request to finish\n            await http_promise;\n            added = added + submission.encounters.length;\n        } catch(error) {\n            // put into console, and rethrow\n            console.log(`error while sending data: ${data}`);\n            console.log(error);\n            throw error;\n        }\n    }\n    return added;\n}\n\nasync function getEncounters(host, port) {\n    var currentPage = 0, totalPages = 1;\n    var result = [];\n    // cutoff for the last two weeks\n    let cutoff = dayjs().subtract(2, 'week').utc().format();\n    while (currentPage < totalPages) {\n        const options = {\n            hostname: host,\n            port: port,\n            path: '/api/encounters/debug?page=' + currentPage + '&status=POSITIVE&timestamp[$gte]=' + cutoff,\n            method: 'GET',\n            headers: { 'Access-Control-Allow-Headers': 'X-Pages', 'Access-Control-Expose-Headers': 'X-Pages'}\n        };\n        let http_promise = createHttpRequestPromise(options);\n        // wait to http request to finish\n        let response = await http_promise;\n        totalPages = response.pages;\n        let entries = JSON.parse(response.body);\n        for (var entry of entries.data.encounters) {\n            result.push(entry);\n        }\n        currentPage++;\n    }\n    return result;\n}\n\n// function returns a Promise\nfunction createHttpRequestPromise(options, data) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = http.request(options, (response) => {\n            let chunks_of_data = [];\n            \n\t\t\tresponse.on('data', (fragments) => {\n\t\t\t\tchunks_of_data.push(fragments);\n\t\t\t});\n\t\t\tresponse.on('end', () => {\n                let response_body = Buffer.concat(chunks_of_data);\n                if (response.statusCode >=200 && response.statusCode < 300) {\n                    resolve({body: response_body.toString(), pages: response.headers['x-pages'] ? response.headers['x-pages'] : 1});\n                } else {\n                    reject(new Error(response_body.toString()));\n                }\n\t\t\t});\n        });\n        request.on('error', error => {\n            if (error.message == 'Failed to fetch') {\n                error.message = 'Failed to fetch (Connection Error?)'\n            }\n            reject(error);\n        });\n        if (data) {\n            request.write(data);\n        }\n        request.end();\n\t});\n}\n\nexport {postEncounters, getEncounters}"],"sourceRoot":""}